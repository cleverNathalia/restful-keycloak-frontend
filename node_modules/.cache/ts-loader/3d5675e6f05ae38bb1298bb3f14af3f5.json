{"remainingRequest":"/home/admin/Documents/spring-frontend/node_modules/babel-loader/lib/index.js!/home/admin/Documents/spring-frontend/node_modules/ts-loader/index.js??ref--13-2!/home/admin/Documents/spring-frontend/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/admin/Documents/spring-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/admin/Documents/spring-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/spring-frontend/src/App.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/admin/Documents/spring-frontend/src/App.vue","mtime":1583504241911},{"path":"/home/admin/Documents/spring-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-frontend/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/admin/Documents/spring-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/admin/Documents/spring-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsgLy8gaW1wb3J0IEhlbGxvV29ybGQgZnJvbSAiLi9jb21wb25lbnRzL0hlbGxvV29ybGQudnVlIjsKLy8gQUREIFRIRSBORVcgQ09NUE9ORU5UUwoKaW1wb3J0IFVzZXIgZnJvbSAiLi9jb21wb25lbnRzL1VzZXIudnVlIjsKaW1wb3J0IEFkbWluIGZyb20gIi4vY29tcG9uZW50cy9BZG1pbi52dWUiOwppbXBvcnQgTmF2IGZyb20gIi4vY29tcG9uZW50cy9OYXYudnVlIjsgLy8gQUREIEtFWUNMT0FLCgppbXBvcnQgS2V5Y2xvYWsgZnJvbSAiLi4vbm9kZV9tb2R1bGVzL2tleWNsb2FrLWpzL2Rpc3Qva2V5Y2xvYWsiOyAvLyBBREQgQVBJCi8vIGltcG9ydCBhcGkgZnJvbSAiLi9jb21wb25lbnRzL2FwaSI7CgppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAiQXBwIiwKICBjb21wb25lbnRzOiB7CiAgICBVc2VyOiBVc2VyLAogICAgQWRtaW46IEFkbWluLAogICAgTmF2OiBOYXYKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21wb25lbnROYW1lOiAiIiwKICAgICAgcGVvcGxlQXJyOiBbXSwKICAgICAgcGVvcGxlSGVhZGVyOiBbIklEIiwgIk5hbWUiLCAiQWRkcmVzcyIsICJQaG9uZSJdLAogICAgICByb2xlOiBTdHJpbmcsCiAgICAgIGhlYWRlck5hbWU6IFN0cmluZywKICAgICAgaW5pdE9wdGlvbnM6IHsKICAgICAgICByZWFsbTogImtleWNsb2FrLWRlbW8iLAogICAgICAgIHVybDogImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hdXRoLyIsCiAgICAgICAgY2xpZW50SWQ6ICJ2dWUtdGVzdC1hcHAiCiAgICAgIH0sCiAgICAgIGtleWNsb2FrOiBLZXljbG9haygpCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZFBhZ2U6IGZ1bmN0aW9uIGxvYWRQYWdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgLy8gVEhJUyBJUyBUSEUgQ09QSUVEIENPREUgRlJPTSBUSEUgS0VZQ0xPQUsgQURNSU5JU1RSQVRJT04gQ09OU09MRS4gSlVTVCBBREFQVCBJVCwgU08gVEhBVCBJVCBNQVRIRVMgVEhJUyBGT1JNQVQKICAgICAgdGhpcy5rZXljbG9hayA9IEtleWNsb2FrKHRoaXMuaW5pdE9wdGlvbnMpOwogICAgICB2YXIgcm9sZXMgPSAiIjsKICAgICAgdGhpcy5rZXljbG9hay5pbml0KHsKICAgICAgICBvbkxvYWQ6ICJsb2dpbi1yZXF1aXJlZCIKICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoYXV0aCkgewogICAgICAgIC8vIENIRUNLIElGIFRIRSBVU0VSIElTIEFVVEhFTlRJQ0FURUQKICAgICAgICBpZiAoIWF1dGgpIHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIlNVQ0NFU1NGVUxMWSBBVVRIRU5USUNBVEVEIik7IC8vIENIRUNLIFdIQVQgUk9MRVMgVEhFWSBIQVZFIEFORCBESVNQTEFZIFRIRSBDT01QT05FTlQgQUNDT1JESU5HIFRPIFRIRSBST0xFCgogICAgICAgICAgcm9sZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KF90aGlzLmtleWNsb2FrLnRva2VuUGFyc2VkKSk7CiAgICAgICAgICBfdGhpcy5yb2xlID0gcm9sZXMucmVhbG1fYWNjZXNzLnJvbGVzOwogICAgICAgICAgX3RoaXMuY29tcG9uZW50TmFtZSA9IFN0cmluZyhfdGhpcy5yb2xlKTsKICAgICAgICAgIF90aGlzLmhlYWRlck5hbWUgPSBfdGhpcy5jb21wb25lbnROYW1lID09ICJhZG1pbiIgPyAibGlnaHQtZ3JlZW4gZGFya2VuLTIiIDogImdyZWVuIGRhcmtlbi0zIjsgLy9NQUtFIENBTEwgVE8gUkVTVCBTRVJWSUNFCgogICAgICAgICAgdmFyIEFYSU9TID0gYXhpb3MuY3JlYXRlKHsKICAgICAgICAgICAgYmFzZVVSTDogIi9hcGkiLAogICAgICAgICAgICB0aW1lb3V0OiAxMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIEFYSU9TLmdldCgiaHR0cDovL2xvY2FsaG9zdDo5MDkwLy9wZW9wbGUvIiArIF90aGlzLnJvbGUpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSk7IC8vRElTUExBWSBEQVRBIElOIENPTVBPTkVOVAoKICAgICAgICAgICAgX3RoaXMucGVvcGxlQXJyLnB1c2gocmVzLmRhdGEuaWQpOwoKICAgICAgICAgICAgX3RoaXMucGVvcGxlQXJyLnB1c2gocmVzLmRhdGEubmFtZSk7CgogICAgICAgICAgICBpZiAocmVzLmRhdGEuYWRkcmVzcyA9PSAiIiB8fCByZXMuZGF0YS5hZGRyZXNzID09ICIiKSB7CiAgICAgICAgICAgICAgX3RoaXMucGVvcGxlQXJyLnB1c2goIkNPTkZJREVOVElBTCIpOwoKICAgICAgICAgICAgICBfdGhpcy5wZW9wbGVBcnIucHVzaCgiQ09ORklERU5USUFMIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICBfdGhpcy5lcnJvcnMucHVzaChlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIFNFVCBUSEUgVE9LRU4gSU4gVEhFIExPQ0FMU1RPUkFHRQoKCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInZ1ZS10b2tlbiIsIFN0cmluZyhfdGhpcy5rZXljbG9hay50b2tlbikpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ2dWUtcmVmcmVzaC10b2tlbiIsIFN0cmluZyhfdGhpcy5rZXljbG9hay5yZWZyZXNoVG9rZW4pKTsgLy8gSEFORExFIFRPS0VOIFRJTUVPVVQKCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5rZXljbG9hay51cGRhdGVUb2tlbig3MCkuc3VjY2VzcyhmdW5jdGlvbiAocmVmcmVzaGVkKSB7CiAgICAgICAgICAgIGlmIChyZWZyZXNoZWQpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVG9rZW4gUmVmcmVzaGVkIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIlRva2VuIE5vdCBSZWZyZXNoZWQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiRmFpbGVkIFRvIFJlZnJlc2ggVG9rZW4iKTsKICAgICAgICAgIH0pOwogICAgICAgIH0sIDYwMDAwKTsKICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJBVVRIRU5USUNBVElPTiBGQUlMRUQiKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkUGFnZSgpOwogIH0KfSk7"},{"version":3,"sources":["/home/admin/Documents/spring-frontend/node_modules/vuetify-loader/lib/loader.js??ref--19-0!/home/admin/Documents/spring-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/admin/Documents/spring-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/admin/Documents/spring-frontend/src/App.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from \"vue\";\n// import HelloWorld from \"./components/HelloWorld.vue\";\n\n// ADD THE NEW COMPONENTS\nimport User from \"./components/User.vue\";\nimport Admin from \"./components/Admin.vue\";\nimport Nav from \"./components/Nav.vue\";\n\n// ADD KEYCLOAK\nimport Keycloak from \"../node_modules/keycloak-js/dist/keycloak\";\n\n// ADD API\n// import api from \"./components/api\";\n\nimport axios from \"axios\";\n\nexport default Vue.extend({\n  name: \"App\",\n\n  components: {\n    User,\n    Admin,\n    Nav\n  },\n\n  data: () => ({\n    componentName: \"\",\n    peopleArr: [],\n    peopleHeader: [\"ID\", \"Name\", \"Address\", \"Phone\"],\n    role: String,\n    headerName: String,\n    initOptions: {\n      realm: \"keycloak-demo\",\n      url: \"http://localhost:8080/auth/\",\n      clientId: \"vue-test-app\"\n    },\n    keycloak: Keycloak()\n  }),\n  methods: {\n    loadPage(): any {\n      // THIS IS THE COPIED CODE FROM THE KEYCLOAK ADMINISTRATION CONSOLE. JUST ADAPT IT, SO THAT IT MATHES THIS FORMAT\n      this.keycloak = Keycloak(this.initOptions);\n\n      let roles = \"\";\n\n      this.keycloak\n        .init({\n          onLoad: \"login-required\"\n        })\n        .success((auth: any) => {\n          // CHECK IF THE USER IS AUTHENTICATED\n          if (!auth) {\n            window.location.reload();\n          } else {\n            console.log(\"SUCCESSFULLY AUTHENTICATED\");\n\n            // CHECK WHAT ROLES THEY HAVE AND DISPLAY THE COMPONENT ACCORDING TO THE ROLE\n            roles = JSON.parse(JSON.stringify(this.keycloak.tokenParsed));\n            this.role = roles.realm_access.roles;\n            this.componentName = String(this.role);\n\n            this.headerName = this.componentName == \"admin\" ? \"light-green darken-2\" : \"green darken-3\";\n\n            //MAKE CALL TO REST SERVICE\n            const AXIOS = axios.create({\n              baseURL: `/api`,\n              timeout: 1000\n            });\n            AXIOS.get(`http://localhost:9090//people/` + this.role)\n              .then(res => {\n                console.log(res.data);\n                //DISPLAY DATA IN COMPONENT\n                this.peopleArr.push(res.data.id);\n                this.peopleArr.push(res.data.name);\n                if (res.data.address == \"\" || res.data.address == \"\") {\n                  this.peopleArr.push(\"CONFIDENTIAL\");\n                  this.peopleArr.push(\"CONFIDENTIAL\");\n                }\n              })\n              .catch(error => {\n                this.errors.push(error);\n              });\n          }\n\n          // SET THE TOKEN IN THE LOCALSTORAGE\n          localStorage.setItem(\"vue-token\", String(this.keycloak.token));\n          localStorage.setItem(\n            \"vue-refresh-token\",\n            String(this.keycloak.refreshToken)\n          );\n\n          // HANDLE TOKEN TIMEOUT\n          setTimeout(() => {\n            this.keycloak\n              .updateToken(70)\n              .success(refreshed => {\n                if (refreshed) {\n                  console.log(\"Token Refreshed\");\n                } else {\n                  console.log(\"Token Not Refreshed\");\n                }\n              })\n              .error(() => {\n                console.log(\"Failed To Refresh Token\");\n              });\n          }, 60000);\n        })\n        .error(() => {\n          console.log(\"AUTHENTICATION FAILED\");\n        });\n    }\n  },\n  mounted() {\n    this.loadPage();\n  }\n});\n"],"sourceRoot":""}]}